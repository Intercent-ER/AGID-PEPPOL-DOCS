
= Imposta sul valore aggiunto (IVA)

I capitoli seguenti descrivono le diverse informazioni in materia dell'IVA che possono essere fornite in una fattura o in una nota di credito {peppol}.

Si consiglia di consultare anche i <<anchor-2, VAT category codes>> per dettagli sulla codifica delle categorie IVA e il <<anchor-2, Calcolo dell'IVA>> per una rappresentazione più dettagliata ed esempi su come eseguire i calcoli nel riepilogo IVA.

== Informazioni IVA su riga

Ogni riga della fattura deve avere il codice della categoria IVA riferita alla voce fatturata (BT-151) e per tutte le categorie IVA, eccetto "Non soggetto ad IVA" (O), deve essere fornita l'aliquota IVA.

== Sconti e maggiorazioni a livello di testata

Ogni sconto o maggiorazione a livello di testata deve avere il codice di categoria IVA (BT-95 e BT-102). Per tutte le categorie IVA, eccetto "Non soggetto ad IVA" (O), deve essere fornita l'aliquota IVA.

#Nel contesto nazionale la sezione è utilizzata solo per Bollo (vedi paragrafo 4.9) e Rivalsa Cassa Previdenziale (vedi paragrafo 4.8).# 

#Per gli sconti e maggiorazioni a livello di testata di FatturaPA si utilizza la specifica UBLextension ....#.

== Riepiloghi IVA e natura dell'operazione

Deve essere fornito un solo riepilogo IVA per ogni combinazione distinta di categoria e aliquota IVA sia a livello di riga che negli sconti e maggiorazioni a livello di testata. Per alcune categorie IVA, l'aliquota deve essere posta a zero e quindi non viene utilizzata in questi casi per raggruppare il riepilovo IVA.

Si consiglia di osservare che per l'aliquota dell'IVA dovrebbero essere considerati solo i decimali significativi, ovvero qualsiasi differenza nei decimali non deve determinare differenti riepiloghi IVA.

.Example
====
Riga 1 della fattura ha categoria IVA = S e aliquota IVA = *25* +
Riga 2 della fattura ha categoria IVA = S e aliquota IVA = *25.00* +
Questo dovrebbe originare un singolo riepilogo IVA.
====


La gestione della natura dell'operazione (FPA 2.2.2.2 Natura) è operata a mezzo dell’utilizzo di: +

1.	*cac:TaxCategory/cbc:ID* (BT-118 VAT category code) per i riepiloghi IVA e *cac:Item/cac:TaxCategory/cbc:ID* (BT-151 VAT category code) per le righe di fattura;
2.	*cbc:TaxExemptionReason* (BT-120 VAT exemption reason text) per i riepiloghi IVA, in cui viene inserita il codice natura secondo le specifiche FatturaPA;
3.	*cbc:TaxExemptionReasonCode* (BT-121 VAT exemption reason code) per i riepiloghi IVA, cosiddetta tabella VATEX;
4.	*cac:AdditionalItemProperty/cbc:Name* (BT-160) e *cac:AdditionalItemProperty/cbc:Value* (BT-161) per indicare la natura a livello di riga di fattura . L’item attribute name viene valorizzato con la stringa “NATURA”, l’item attribute value con il codice natura secondo le specifiche FatturaPA. +

[IMPORTANT]
Non è possibile inserire nella medesima fattura operazioni con il medesimo Tax Category ID (BT-118 VAT category code) e natura differente.

.Tabella di relazione tra natura, VAT Category Code e VAT exemption reason code
image::../transaction-spec/vat-info/image/vatex_table.png[Vatex table, width=100%, pdfwidth=100%, scaledwidth=100%]


=== Caso 1 - natura diversa da N1 – esempio riferito ad un’operazione in regime di reverse charge

[source, xml, indent=0]
----
<cac:TaxTotal>
  <cbc:TaxAmount currencyID="EUR">0.00</cbc:TaxAmount>
  <cac:TaxSubtotal>
    <cbc:TaxableAmount currencyID="EUR">100.00</cbc:TaxableAmount>
    <cbc:TaxAmount currencyID="EUR">0.00</cbc:TaxAmount>
    <cac:TaxCategory>
      <cbc:ID>AE</cbc:ID>
    </cac:TaxCategory>
    <cbc:TaxExemptionReasonCode>vatex-eu-ae</cbc:TaxExemptionReasonCode>
    <cbc:TaxExemptionReason>N6.3</cbc:TaxExemptionReason>
    <cac:TaxScheme>
      <cbc:ID>VAT</cbc:ID>
    </cac:TaxScheme>
  </cac:TaxSubtotal>
</cac:TaxTotal>
<!-- ... -->
<cac:InvoiceLine>
  <cbc:ID>1</cbc:ID>
  <cbc:InvoiceQuantity unitCode="C62">1</cbc:InvoiceQuantity>
  <cbc:LineExtensionAmount currencyID="EUR">100.00</cbc:LineExtensionAmount>
  <cac:Item>
    <cbc:Description>Inversione contabile</cbc:Description>
    <cbc:Name>Subappalto nel settore edile</cbc:Name>
    <cac:ClassifiedTaxCategory>
      <cbc:ID>AE</cbc:ID>
      <cac:TaxScheme>
        <cbc:ID>VAT</cbc:ID>
      </cac:TaxScheme>
    </cac:ClassifiedTaxCategory>
    <cac:AdditionalItemProperty>
      <cbc:Name>NATURA</cbc:Name>
      <cbc:Value>N6.3</cbc:Value>
    </cac:AdditionalItemProperty>
  </cac:Item>
  <cac:Price>
    <cbc:PriceAmount currencyID="EUR">100.00</cbc:PriceAmount>
  </cac:Price>
----

=== Caso 2 - natura N1 – esempio riferito ad un’operazione esclusa

[source, xml, indent=0]
----
<cac:TaxTotal>
  <cbc:TaxAmount currencyID="EUR">0.00</cbc:TaxAmount>
  <cac:TaxSubtotal>
    <cbc:TaxableAmount currencyID="EUR">100.00</cbc:TaxableAmount>
    <cbc:TaxAmount currencyID="EUR">0.00</cbc:TaxAmount>
    <cac:TaxCategory>
      <cbc:ID>Z</cbc:ID>
      <cbc:Percent>0</cbc:Percent>
    </cac:TaxCategory>
    <cac:TaxScheme>
      <cbc:ID>VAT</cbc:ID>
    </cac:TaxScheme>
  </cac:TaxSubtotal>
</cac:TaxTotal>
<!-- ... -->
<cac:InvoiceLine>
  <cbc:ID>1</cbc:ID>
  <cbc:InvoiceQuantity unitCode="C62">5</cbc:InvoiceQuantity>
  <cbc:LineExtensionAmount currencyID="EUR">100.00</cbc:LineExtensionAmount>
  <cac:Item>
    <cbc:Name>Importo degli imballaggi</cbc:Name>
    <cac:ClassifiedTaxCategory>
      <cbc:ID>Z</cbc:ID>
      <cbc:Percent>0</cbc:Percent>
      <cac:TaxScheme>
        <cbc:ID>VAT</cbc:ID>
      </cac:TaxScheme>
    </cac:ClassifiedTaxCategory>
    <cac:AdditionalItemProperty>
      <cbc:Name>NATURA</cbc:Name>
      <cbc:Value>N1</cbc:Value>
    </cac:AdditionalItemProperty>
  </cac:Item>
  <cac:Price>
    <cbc:PriceAmount currencyID="EUR">20.00</cbc:PriceAmount>
    <cbc:BaseQuantity unitCode="C62">1</cbc:BaseQuantity>
  </cac:Price>
</cac:InvoiceLine>
----

== Data operazione ed esigibilità IVA

La gestione della data operazione e dell’esigibilità IVA è operata a mezzo dell’utilizzo di: +

1.	*cbc:IssueDate* (BT-2 Invoice issue date);
2.	*cac:InvoicePeriod/cbc:DescriptionCode* (BT-8 Value added tax point date code);
3.	*cbc:ActualDeliveryDate* (BT-72 Actual delivery date); 
4.	*cac:TaxCategory/cbc:ID* (BT-118 VAT category code); +

Si evidenziano 6 casi distinti.

=== Caso 1 - Esigibilità immediata, data fattura coincide con data operazione +

In questo caso il *cbc:IssueDate* (BT-2 Invoice issue date) viene valorizzato con data fattura/data operazione e il *cac:InvoicePeriod/cbc:DescriptionCode* (BT-8 Value added tax point date code) viene valorizzato con “3” (ovvero Invoice document issue time).

[source, xml, indent=0]
----
<cbc:IssueDate>2020-02-07</cbc:IssueDate>
<cac:InvoicePeriod>
  <cbc:DescriptionCode>3</cbc:DescriptionCode>
</cac:InvoicePeriod>
<cac:TaxTotal>
  <cbc:TaxAmount currencyID="EUR">22.00</cbc:TaxAmount>
  <cac:TaxSubtotal>
    <cbc:TaxableAmount currencyID="EUR">100.00</cbc:TaxableAmount>
    <cbc:TaxAmount currencyID="EUR">22.00</cbc:TaxAmount>
    <cac:TaxCategory>
      <cbc:ID>S</cbc:ID>
      <cbc:Percent>22</cbc:Percent>
    </cac:TaxCategory>
    <cac:TaxScheme>
      <cbc:ID>VAT</cbc:ID>
    </cac:TaxScheme>
  </cac:TaxSubtotal>
</cac:TaxTotal>
----


=== Caso 2 - Esigibilità immediata, data fattura non coincidente con data operazione 

In questo caso il *cbc:IssueDate* (BT-2 Invoice issue date) viene valorizzato con data fattura, il *cac:InvoicePeriod/cbc:DescriptionCode* (BT-8 Value added tax point date code) viene valorizzato con “35” (ovvero Delivery date, actual) ed il *cbc:ActualDeliveryDate* (BT-72 Actual delivery date) viene valorizzato con la data operazione.

[source, xml, indent=0]
----
<cbc:IssueDate>2020-01-20</cbc:IssueDate>
<!-- ... -->
<cac:InvoicePeriod>
  <cbc:DescriptionCode>35</cbc:DescriptionCode>
</cac:InvoicePeriod>
<!-- ... -->
<cac:Delivery>
  <cbc:ActualDeliveryDate>2020-01-15</cbc:ActualDeliveryDate>
</cac:Devlivery>
<!-- ... -->
<cac:TaxTotal>
  <cbc:TaxAmount currencyID="EUR">22.00</cbc:TaxAmount>
  <cac:TaxSubtotal>
    <cbc:TaxableAmount currencyID="EUR">100.00</cbc:TaxableAmount>
    <cbc:TaxAmount currencyID="EUR">22.00</cbc:TaxAmount>
    <cac:TaxCategory>
      <cbc:ID>S</cbc:ID>
      <cbc:Percent>22</cbc:Percent>
    </cac:TaxCategory>
    <cac:TaxScheme>
      <cbc:ID>VAT</cbc:ID>
    </cac:TaxScheme>
  </cac:TaxSubtotal>
</cac:TaxTotal>
----


=== Caso 3 - Esigibilità differita, data fattura coincide con data operazione

In questo caso il *cbc:IssueDate* (BT-2 Invoice issue date) viene valorizzato con data fattura/data operazione e il *cac:InvoicePeriod/cbc:DescriptionCode* (BT-8 Value added tax point date code) viene valorizzato con “432” (ovvero Paid to date).


[source, xml, indent=0]
----
<cbc:IssueDate>2020-02-07</cbc:IssueDate>
<!-- ... -->
<cac:InvoicePeriod>
  <cbc:DescriptionCode>432</cbc:DescriptionCode>
</cac:InvoicePeriod>
<!-- ... -->
<cac:TaxTotal>
  <cbc:TaxAmount currencyID="EUR">22.00</cbc:TaxAmount>
  <cac:TaxSubtotal>
    <cbc:TaxableAmount currencyID="EUR">100.00</cbc:TaxableAmount>
    <cbc:TaxAmount currencyID="EUR">22.00</cbc:TaxAmount>
    <cac:TaxCategory>
      <cbc:ID>S</cbc:ID>
      <cbc:Percent>22</cbc:Percent>
    </cac:TaxCategory>
    <cac:TaxScheme>
      <cbc:ID>VAT</cbc:ID>
    </cac:TaxScheme>
  </cac:TaxSubtotal>
</cac:TaxTotal>
----



=== Caso 4 - Esigibilità differita, data fattura non coincidente con data operazione

In questo caso il *cbc:IssueDate* (BT-2 Invoice issue date) viene valorizzato con data fattura, il *cac:InvoicePeriod/cbc:DescriptionCode* (BT-8 Value added tax point date code) viene valorizzato con “432” (ovvero Paid to date) ed il *cbc:ActualDeliveryDate* (BT-72 Actual delivery date) viene valorizzato con la data operazione.


[source, xml, indent=0]
----
<cbc:IssueDate>2020-01-20</cbc:IssueDate>
<!-- ... -->
<cac:InvoicePeriod>
  <cbc:DescriptionCode>432</cbc:DescriptionCode>
</cac:InvoicePeriod>
<!-- ... -->
<cac:Delivery>
  <cbc:ActualDeliveryDate>2020-01-15</cbc:ActualDeliveryDate>
</cac:Devlivery>
<!-- ... -->
<cac:TaxTotal>
  <cbc:TaxAmount currencyID="EUR">22.00</cbc:TaxAmount>
  <cac:TaxSubtotal>
    <cbc:TaxableAmount currencyID="EUR">100.00</cbc:TaxableAmount>
    <cbc:TaxAmount currencyID="EUR">22.00</cbc:TaxAmount>
    <cac:TaxCategory>
      <cbc:ID>S</cbc:ID>
      <cbc:Percent>22</cbc:Percent>
    </cac:TaxCategory>
    <cac:TaxScheme>
      <cbc:ID>VAT</cbc:ID>
    </cac:TaxScheme>
  </cac:TaxSubtotal>
</cac:TaxTotal>
----


=== Caso 5 – Split payment, data fattura coincide con data operazione

In questo caso il *cbc:IssueDate* (BT-2 Invoice issue date) viene valorizzato con data fattura/data operazione, il *cac:InvoicePeriod/cbc:DescriptionCode* (BT-8 Value added tax point date code) è lasciato vuoto e il *cac:TaxCategory/cbc:ID* (BT-118 VAT category code) viene valorizzato con “B” (ovvero split payment).


[source, xml, indent=0]
----
<cbc:IssueDate>2020-02-07</cbc:IssueDate>
<!-- ... -->
<cac:TaxTotal>
  <cbc:TaxAmount currencyID="EUR">22.00</cbc:TaxAmount>
  <cac:TaxSubtotal>
    <cbc:TaxableAmount currencyID="EUR">100.00</cbc:TaxableAmount>
    <cbc:TaxAmount currencyID="EUR">22.00</cbc:TaxAmount>
    <cac:TaxCategory>
      <cbc:ID>B</cbc:ID>
      <cbc:Percent>22</cbc:Percent>
    </cac:TaxCategory>
    <cac:TaxScheme>
      <cbc:ID>VAT</cbc:ID>
    </cac:TaxScheme>
  </cac:TaxSubtotal>
</cac:TaxTotal>
----




=== Caso 6 – Split payment, data fattura non coincidente con data operazione

In questo caso il *cbc:IssueDate* (BT-2 Invoice issue date) viene valorizzato con la data fattura, il *cac:InvoicePeriod/cbc:DescriptionCode* (BT-8 Value added tax point date code) è lasciato vuoto, il *cbc:ActualDeliveryDate* (BT-72 Actual delivery date) viene valorizzato con la data operazione ed il *cac:TaxCategory/cbc:ID* (BT-118 VAT category code) viene valorizzato con “B” (ovvero split payment).


[source, xml, indent=0]
----
<cbc:IssueDate>2020-01-20</cbc:IssueDate>
<!-- ... -->
<cac:Delivery>
  <cbc:ActualDeliveryDate>2020-01-15</cbc:ActualDeliveryDate>
</cac:Devlivery>
<!-- ... -->
<cac:TaxTotal>
  <cbc:TaxAmount currencyID="EUR">22.00</cbc:TaxAmount>
  <cac:TaxSubtotal>
    <cbc:TaxableAmount currencyID="EUR">100.00</cbc:TaxableAmount>
    <cbc:TaxAmount currencyID="EUR">22.00</cbc:TaxAmount>
    <cac:TaxCategory>
      <cbc:ID>B</cbc:ID>
      <cbc:Percent>22</cbc:Percent>
    </cac:TaxCategory>
    <cac:TaxScheme>
      <cbc:ID>VAT</cbc:ID>
    </cac:TaxScheme>
  </cac:TaxSubtotal>
</cac:TaxTotal>
----

