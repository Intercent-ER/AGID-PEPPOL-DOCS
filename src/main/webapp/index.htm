<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Specifiche PEPPOL 3.0</title>
        <meta charset="utf-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>

        <link rel="stylesheet" href="css/bootstrap.css"/>
        <link rel="stylesheet" href="css/structure.css"/>
        <link rel="stylesheet" href="css/font-awesome.min.css?v=4.7.0">
        <!--link href="css/asciidoctor-default.css" rel="stylesheet" type="text/css"/-->
        <!--link href="css/coderay-asciidoctor.css" rel="stylesheet" type="text/css"/-->

        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
        <script src="/js/jquery-1.12.4.min.js"></script>
        <script src="/js/bootstrap.js"></script>
        <script>
            //<![CDATA[
            $(function () {
                var $html = $("html"), $body = $("body"), $main = $("#main"), $guide = $("#guide").hide(), $adoc = $("#adoc-viewer"), $loader = $("#loader");
                var source = window.location.href.split('?')[0];
                var defBis = "peppol-bis-invoice-3";

                $.bis = $.bis || {};
                $.bis.initBIS = function ($bis) {
                    var bisRef = $bis.attr("href");
                    $("#home-title").text($bis.text());
                    // Home Menu
                    $("#syntax-menu").load(bisRef + '/menu/syntax-menu.html .dropdown-menu > li');
                    $("#rule-menu").load(bisRef + '/menu/rule-menu.html .dropdown-menu > li');
                    $("#codelist-menu").load(bisRef + '/menu/codelist-menu.html .dropdown-menu > li');
                    // Home List
                    $("#intro-list").load(bisRef + '/menu/intro-list.html .list-group > a');
                    $("#bis-list").load(bisRef + '/menu/bis-list.html .list-group > a');
                    $("#syntax-list").load(bisRef + '/menu/syntax-list.html .list-group > a');
                    $("#rule-list").load(bisRef + '/menu/rule-list.html .list-group > a');
                    $("#codelist-list").load(bisRef + '/menu/codelist-list.html .list-group > a');
                };

                $.bis.current = $("#peppol-bis a[href='" + defBis + "']");
                $.bis.initBIS($.bis.current);

                $('#peppol-bis a').click(function (e) {
                    e.preventDefault();

                    var $bis = $(this);
                    $.bis.current = $bis;

                    $("#peppol-bis > button:first").text($bis.text());
                    $guide.hide();
                    $main.show();
                    $.bis.initBIS($bis);
                });

                $(document).on("click", "#intro-list a, #bis-list a", function (e) {
                    e.preventDefault();

                    var $intro = $(this);
                    $main.hide();
                    if ($intro.attr("href") !== $adoc.attr("src")) {
                        $guide.html($loader).show();
                        $adoc.empty().attr("src", $intro.attr("href"));
                    }
                }).on("click", "#syntax-menu a, #syntax-list a, #rule-menu a, #rule-list a, #codelist-menu a, #codelist-list a, #section-menu a", function (e) {
                    e.preventDefault();
                    var $item = $(this);
                    $body.removeClass("adoc-mode");
                    $main.hide();
                    $guide.html($loader).show();
                    $guide.load($item.attr("href") + " #main > *", function (e) {
                        $loader.appendTo("#parking");
                    });
                }).on("click", "#bis-section",function (e) {
                    e.preventDefault();
                    var $section = $(this);
                    $body.removeClass("adoc-mode");
                    $main.hide();
                    $guide.html($loader).show();
                    $guide.load($.bis.current.attr("href") + '/menu/' + $section.attr("href") + ".html #main > *", function (e) {
                        $loader.appendTo("#parking");
                    });
                }).on("click", "#peppol-bis > button:first, #bis-index", function (e) {
                    e.preventDefault();

                    $guide.hide();
                    $main.show();
                    $.bis.initBIS($.bis.current);
                });

                $adoc.load(function () {
                    $loader.appendTo("#parking");
                    $body.addClass("adoc-mode");
                });

                //var rules = $html.data("rules");

                //$("#rule").hide();
                //$("#rules").show();

                $("#path").on("click", "li.subcontext a", function (e) {
                    e.preventDefault();
                    var ctx = $("#" + $(this).attr("href"));
                    changeContext(ctx);
                });

                $(document).on("click", "#rules tr > td > a", function (e) {
                    e.preventDefault();
                    var ctx = $(this);
                    changeContext(ctx);
                });

                function changeContext(ctx) {
                    var branch = ctx.closest("tr"), activeContext = branch.find("> td > a").text();

                    $("#path").html('<li><a href="' + source + '">' + rules + '</a></li><li class="active">' + activeContext + '</li>');
                    // <li><a href="../../../">Home</a></li>
                    $("#context").text(activeContext);
                    $("#rules").hide();
                    $("#rule").find(".message").text(branch.find(".message").text()).end()
                            .find(".context").text(branch.data("context")).end()
                            .find(".test").text(branch.data("test")).end().show();
                }
            });
            //]]>
        </script>
    </head>
    <body>

        <nav class="navbar navbar-default navbar-fixed-top">

            <div class="container">

                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                            data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <!--a class="navbar-brand" href="#">Specifiche PEPPOL 3.0</a-->
                    <!--a class="navbar-brand" href="#">AGID</a-->
                    <a class="navbar-brand" href="#" style="margin-top: -15px;"><img src="/images/credits.png" height="50" alt="AGID"></a>
                </div>

                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">
                        <li class="btn-group" id="peppol-bis">
                            <button type="button" class="btn btn-primary" style="margin-top: 8px;">PEPPOL BIS Fatturazione 3.0</button>
                            <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="margin-top: 8px;">
                                <span class="caret"></span>
                                <span class="sr-only">Toggle Dropdown</span>
                            </button>
                            <ul class="dropdown-menu">
                                <li><a href="peppol-bis-invoice-3">PEPPOL BIS Fatturazione 3.0</a></li>
                                <li><a href="peppol-bis-3">PEPPOL BIS 3.0</a></li>
                            </ul>
                        </li>

                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Sintassi <span class="caret"></span></a>
                            <ul class="dropdown-menu" id="syntax-menu">
                            </ul>
                        </li>

                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Regole <span class="caret"></span></a>
                            <ul class="dropdown-menu" id="rule-menu">

                                <!--li><a href="./rules/T01/PEPPOL Order transaction 3.0_Rules.htm">Regole di business per Ordine Semplice PEPPOL 3.0 </a></li>
                                <li><a href="./rules/T76/Order Response transaction 3.0_Rules.htm">Regole di business per Risposta all'Ordine PEPPOL 3.0</a></li>
                                <li><a href="#" style="color:#c60000;">Regole di business per Ordine Pre-Concordato PEPPOL 3.0</a></li>
                                <li><a href="#" style="color:#c60000;">Regole base per Ordine Pre-Concordato PEPPOL 3.0</a></li-->

                            </ul>
                        </li>

                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Codifiche <span class="caret"></span></a>
                            <ul class="dropdown-menu" id="codelist-menu">
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <div id="main" class="container">

            <div class="page-header">
                <h1>Indice :: <span id="home-title"></span></h1>
            </div>

            <dl class="dl-horizontal">

                <dt>Introduzione</dt>
                <dd>
                    <div class="list-group" id="intro-list">
                    </div>
                </dd>

                <dt>Documentazione</dt>
                <dd>
                    <div class="list-group" id="bis-list">
                    </div>
                </dd>

                <dt>Sintassi</dt>
                <dd>
                    <div class="list-group" id="syntax-list">
                    </div>
                </dd>

                <dt>Regole</dt>
                <dd>
                    <div class="list-group" id="rule-list">
                    </div>
                </dd>

                <dt>Codifiche</dt>
                <dd>
                    <div class="list-group" id="codelist-list">
                    </div>
                </dd>

                <dt>Downloads</dt>
                <dd>
                    <div class="list-group" id="download-list">

                        <a href="./attachments/Intercent-ER-Esempi-Xml-Peppol-3.zip" class="list-group-item">
                            <h4 class="list-group-item-heading">File di esempio</h4>
                        </a>
                        <a href="./attachments/Schematron.zip" class="list-group-item">
                            <h4 class="list-group-item-heading">File schematron</h4>
                        </a>
                        <a href="./attachments/Tool_Validazione_PEPPOL_BIS_3.0_NSO-Test_v1.3.1.zip" class="list-group-item">
                            <h4 class="list-group-item-heading">Tool di validazione</h4>
                        </a>

                    </div>
                </dd>

            </dl>

        </div>

        <div id="guide" class="container">

        </div>
        <iframe id="adoc-viewer" name="adocViewer" src="" style="display: none; width: 100%; height: 100%; border: none"></iframe>
        <div id="parking" style="display: none;">
            <div id="loader"><i class="spinner fa fa-spinner fa-pulse fa-3x"></i></div>
        </div>

    </body>
</html>